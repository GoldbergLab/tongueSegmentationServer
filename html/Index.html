<html>
<head>
  {headLinksHTML}
</head>
<body>
  {navBarHTML}
  <div class="section">
    <div class="container">
      <h1 class="section-heading">
        NestSeg: Semantic Segmentation of Mouse Nests
      </h1>
    </div>
  </div>
  <div class="section">
    <div class="container">
      <div class="row">
        <h4 class="nine columns"
            aria-label="Create a new nest segmentation job.
              Once all jobs ahead in line are done, your job will automatically start.
              You do not need to keep the browser window open - it will run independently."
            data-balloon-pos="down"
            data-balloon-length="large">
          Create new segmentation job:
        </h4>
      </div>
      <form action="/finalizeSegmentationJob" method="POST">
        <div class="row">
          <label class="three columns" for="jobName"
              aria-label="Enter a name or description of job to make it easier to remember what's going on later."
              data-balloon-pos="down"
              data-balloon-length="fit">
            Job name/description:
          </label>
          <input class="nine columns" type="text" id="jobName" name="jobName" value="My job">
        </div>
        <div class="row">
          <label class="three columns" for="rootMountPoint"
              aria-label="Choose one of the drives/network shares available to the segmentation server which contains your videos. Normally you will be selecting a shared network drive."
              data-balloon-pos="down"
              data-balloon-length="fit">
            Root mount point:
          </label>
          <select class="nine columns" name="rootMountPoint" id="rootMountPoint">
          {mopts}
          </select>
        </div>
        <div class="row">
          <label class="three columns" for="videoSearchDirs"
              aria-label="Specify one or more video directories where your videos live.
                The directories must be accessible to the segmentation server (either on a local drive, or more likely, on a shared drive).
                The root of this path will be replaced by the root you select above, so you don't have to worry about the drive letter or mount point.
                The easiest way is to copy and paste the path to each directory as you see it on your computer. If you specify more than one video
                save directory, there must be exactly one video directory per mask directory; they must be in corresponding order to the mask
                directories."
              data-balloon-pos="down"
              data-balloon-length="fit">
            Video search directories (one per line):
          </label>
          <textarea class="nine columns" rows="3" cols="30" id="videoSearchDirs" name="videoSearchDirs" value=""></textarea>
        </div>
        <div class="row">
          <label class="three columns" for="videoFilter"
              aria-label="Enter a filename filter to select which videos to include.
                You may use the * wildcard.
                Leave simply as * to select all videos within the specieid directories."
              data-balloon-pos="down"
              data-balloon-length="fit">
            Video filename filter:
          </label>
          <input class="nine columns" type="text" id="videoFilter" name="videoFilter" value="*">
        </div>
        <div class="row">
          <label class="three columns" for="maskSaveDirs"
              aria-label="Specify one or more directories that you want the masks to be saved in.
                As with the video directories, the directory must be accessible to the segmentation server
                (either on the server computer, or on a network drive accessible to it),
                and whatever root is specified in the path will be replaced with the selected root. If you
                specify more than one mask save directory, there must be exactly one mask save directory per
                video directory; they must be in corresponding order to the video directories."
              data-balloon-pos="down"
              data-balloon-length="fit">
            Mask save directories (one per line):
          </label>
          <textarea class="nine columns" rows="3" cols="30" id="maskSaveDirs" name="maskSaveDirs" value=""></textarea>
        </div>
        <div class="row">
            <label class="label-body three columns" for="windowsStyle"
                aria-label="Are the paths you specified above formatted as a Windows path?
                  If you are running Windows, and you copy-pasted the path, choose this option."
                data-balloon-pos="down"
                data-balloon-length="fit">
              Windows-style paths
            </label>
            <input class="one column large-radio" type="radio" id="windowsStyle" name="pathStyle" value="windowsStylePaths" checked>
        </div>
        <div class="row">
          <label class="label-body three columns" for="posixStyle"
              aria-label="Are the paths you specified above formatted as a Mac/Linux path?
                If you are running Mac OS or Linux, and you copy-pasted the path, choose this option."
              data-balloon-pos="down"
              data-balloon-length="fit">
            Mac/Linux-style paths
          </label>
          <input class="one column large-radio" type="radio" id="posixStyle" name="pathStyle" value="posixStylePaths">
        </div>
        <div class="row">
          <label class="three columns" class="six columns" for="topNetworkName"
              aria-label="Select a trained neural network to use to segment the top part of the videos.
                If the network you want to use is not in this list, ask the server administrator to add it to the list of available networks."
              data-balloon-pos="down"
              data-balloon-length="fit">
            Neural network name:
          </label>
          <select class="nine columns" name="topNetworkName" id="topNetworkName">
          {nopts_top}
          </select>
        </div>
        <div class="row">
          <label class="three columns" for="topOffset"
              aria-label="Specify how far from the top of the video the top mask should begin, in pixels.
                For example, if the top of the top mask should be 20 pixels below the top of the video, enter 20."
              data-balloon-pos="down"
              data-balloon-length="fit">
            Mask vertical offset:
          </label>
          <input class="two columns" type="number" id="topOffset" name="topOffset" min="0" step="1" value="0">
        </div>
        <div class="row">
          <label class="three columns" for="topHeight"
              aria-label="Optional - specify the desired height of the top mask, in pixels.
                If you want to allow the neural network settings to determine the mask height (most likely), leave this blank.
                Some neural networks may have a predefined mask shape, some do not."
              data-balloon-pos="down"
              data-balloon-length="fit">
            Mask height:
          </label>
          <input class="two columns" type="number" id="topHeight" name="topHeight" min="0" step="1" value="">
        </div>
        <div class="row">
          <label class="three columns" for="topWidth"
              aria-label="Optional - specify the desired width of the top mask, in pixels.
                If you want to allow the neural network settings to determine the mask width (most likely), leave this blank.
                Some neural networks may have a predefined mask shape, some do not."
              data-balloon-pos="down"
              data-balloon-length="fit">
            Mask width:
          </label>
          <input class="two columns" type="number" id="topWidth" name="topWidth" min="0" step="1" value="">
        </div>
        <div class="row">
          <label class="three columns" for="binaryThreshold"
              aria-label="Specify the probability threshold (between 0 and 1) above which a pixel should be considered to contain tongue.
                The neural network outputs a map of prediction probabilities indicating how likely it is that each pixel contains a nest.
                To transform this into a binary segmentation of where the nest is or is not, you must threshold the probability map.
                Any pixels with probabilities of nest greater than the threshold are considered to offically be nest pixels.
                Any pixels with probabilities below the threshold are considered to officially be not-nest pixels."
              data-balloon-pos="down"
              data-balloon-length="fit">
            Binary Threshold:
          </label>
          <input class="two columns" type="number" id="binaryThreshold" name="binaryThreshold" min="0" max="1" step="0.001" value="0.3">
        </div>
        <div class="row">
          <label class="three columns" for="generatePreview"
              aria-label="Should the server generate an animated gif preview of each mask as it gets made,
                allowing you to see the results live in your browser? It adds a second or two of processing time per video, depending on the video sizes."
              data-balloon-pos="down"
              data-balloon-length="fit">
            Generate mask previews?
          </label>
          <input class="two columns large-checkbox" type="checkbox" id="generatePreview" name="generatePreview" checked>
        </div>
        <div class="row">
          <label class="three columns" for="skipExisting"
              aria-label="If a mask already exists, should we skip it? Or generate it and overwrite?"
              data-balloon-pos="down"
              data-balloon-length="fit">
            Skip existing masks?
          </label>
          <input class="two columns large-checkbox" type="checkbox" id="skipExisting" name="skipExisting">
        </div>
        <div aria-label="Create the segmentation job with the specified parameters.
              You will be asked to confirm the parameters before the job is enqueued."
            data-balloon-pos="down"
            data-balloon-length="fit">
          <input class="button button-primary u-full-width" type="submit" value="Initialize segmentation job">
        </div>
      </form>
    </div>
  </div>
</body>
</html>
